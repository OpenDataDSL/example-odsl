@token={{auth.response.body.access_token}}
@t=eyJ0eXAiOiJKV1QiLCJub25jZSI6ImItdEpMNXlKckJmRldwX2N1RTVHNDJ2VVZOc2paQU5mbG5xRjFSOGdDLWsiLCJhbGciOiJSUzI1NiIsIng1dCI6Imwzc1EtNTBjQ0g0eEJWWkxIVEd3blNSNzY4MCIsImtpZCI6Imwzc1EtNTBjQ0g0eEJWWkxIVEd3blNSNzY4MCJ9.eyJhdWQiOiJodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vIiwiaXNzIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvNWZkNzBiNzYtYzczYi00YWE0LWI4NzEtN2RkOTkwMjQ3NGRjLyIsImlhdCI6MTYzNDYyNzg1NCwibmJmIjoxNjM0NjI3ODU0LCJleHAiOjE2MzQ2MzE3NTQsImFjY3QiOjAsImFjciI6IjEiLCJhaW8iOiJBV1FBbS84VEFBQUFLSE9FYzhTVkc1UlNhOUtHb3RxRUlVMlIwM0w0cEhwd3JNaE1oZlI1b2ROWHNZVXlndmNBZWZhOVFTcUM2QUE1aHQ1dEVlOUpNT2F1MTRVbkZ3ZFNKc1dDand5bEN0Z3NkTExqZFVoM1ExQ1hIMUQ0cjN2c3IyZHhoYU1wczNGNSIsImFsdHNlY2lkIjoiNTo6MTAwMzIwMDEwNTdFOTI4MCIsImFtciI6WyJwd2QiXSwiYXBwX2Rpc3BsYXluYW1lIjoiQURJYml6YVVYIiwiYXBwaWQiOiI3NDY1ODEzNi0xNGVjLTQ2MzAtYWQ5Yi0yNmUxNjBmZjBmYzYiLCJhcHBpZGFjciI6IjIiLCJjb250cm9scyI6WyJjYV9lbmYiXSwiZW1haWwiOiJjb2xpbi5oYXJ0bGV5QG9wZW5kYXRhZHNsLmNvbSIsImZhbWlseV9uYW1lIjoiSGFydGxleSIsImdpdmVuX25hbWUiOiJjb2xpbi5oYXJ0bGV5QG9wZW5kYXRhZHNsLmNvbSIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0L2VmMzRkYzM3LTlkNTUtNDNjNC05OWFkLWEzNWYzYzk2ZjhmNC8iLCJpZHR5cCI6InVzZXIiLCJpcGFkZHIiOiI4Ni4xNDAuMTgzLjIzOSIsIm5hbWUiOiJjb2xpbi5oYXJ0bGV5QG9wZW5kYXRhZHNsLmNvbSBIYXJ0bGV5Iiwib2lkIjoiNzkyYzVjYWItZTMwOC00NjNkLTg5NTktZDRlYzBkNGE0YzQ0IiwicGxhdGYiOiIzIiwicHVpZCI6IjEwMDMyMDAxOTU0NkE1RjAiLCJyaCI6IjAuQVM4QWRndlhYenZIcEVxNGNYM1prQ1IwM0RhQlpYVHNGREJHclpzbTRXRF9EOFl2QU9nLiIsInNjcCI6IkFjY2Vzc1Jldmlldy5SZWFkV3JpdGUuQWxsIEF1ZGl0TG9nLlJlYWQuQWxsIERpcmVjdG9yeS5BY2Nlc3NBc1VzZXIuQWxsIERpcmVjdG9yeS5SZWFkLkFsbCBEaXJlY3RvcnkuUmVhZFdyaXRlLkFsbCBlbWFpbCBFbnRpdGxlbWVudE1hbmFnZW1lbnQuUmVhZC5BbGwgR3JvdXAuUmVhZFdyaXRlLkFsbCBJZGVudGl0eVByb3ZpZGVyLlJlYWRXcml0ZS5BbGwgSWRlbnRpdHlSaXNrRXZlbnQuUmVhZFdyaXRlLkFsbCBJZGVudGl0eVVzZXJGbG93LlJlYWQuQWxsIG9wZW5pZCBQb2xpY3kuUmVhZC5BbGwgUG9saWN5LlJlYWRXcml0ZS5BdXRoZW50aWNhdGlvbkZsb3dzIFBvbGljeS5SZWFkV3JpdGUuQXV0aGVudGljYXRpb25NZXRob2QgUG9saWN5LlJlYWRXcml0ZS5Db25kaXRpb25hbEFjY2VzcyBwcm9maWxlIFJlcG9ydHMuUmVhZC5BbGwgUm9sZU1hbmFnZW1lbnQuUmVhZFdyaXRlLkRpcmVjdG9yeSBTZWN1cml0eUV2ZW50cy5SZWFkV3JpdGUuQWxsIFRydXN0RnJhbWV3b3JrS2V5U2V0LlJlYWQuQWxsIFVzZXIuRXhwb3J0LkFsbCBVc2VyLlJlYWRXcml0ZS5BbGwgVXNlckF1dGhlbnRpY2F0aW9uTWV0aG9kLlJlYWRXcml0ZS5BbGwiLCJzdWIiOiJDUFpnQVhkbzdJT01uMzgtNC1HLVV3U0xaQVJuNlM3blkybHl5Mm5OQnh3IiwidGVuYW50X3JlZ2lvbl9zY29wZSI6IkVVIiwidGlkIjoiNWZkNzBiNzYtYzczYi00YWE0LWI4NzEtN2RkOTkwMjQ3NGRjIiwidW5pcXVlX25hbWUiOiJjb2xpbi5oYXJ0bGV5QG9wZW5kYXRhZHNsLmNvbSIsInV0aSI6ImJfX2xqQ3BCWFUySy1vRTBWUjhNQUEiLCJ2ZXIiOiIxLjAiLCJ3aWRzIjpbIjYyZTkwMzk0LTY5ZjUtNDIzNy05MTkwLTAxMjE3NzE0NWUxMCIsImI3OWZiZjRkLTNlZjktNDY4OS04MTQzLTc2YjE5NGU4NTUwOSJdLCJ4bXNfc3QiOnsic3ViIjoiNnExSHM2Z2J5amh0Q3laMHU5Q0xPZ3h2enlVc3A5a3haWXBQcnpscDZBMCJ9LCJ4bXNfdGNkdCI6MTYzMzk0MTU2NX0.Mx65HPdOBPbaME446LMr6l1rTPj2L_8RXZqO7vd7YW-bg80XEbfZJ1flh0i84FikXrFp5FULWvNmvyF97rU7TTLpbl_-FdlYHcQq9NnLii7Pf6kcmCBazj7l1w1fZ38dgq8xecrj9mwt1IDLMm7AT0xN4jOonFzk7rzWM0ky82sQERu5a4fvoKVTl_h_DbA6Lrfn72IdncI_Me0jUN-JcIwbRNR9HD4gDrV_BhV0jueydBG73XEnmZFV5YjhJx6Lu4YmkCDTwrGteOGM0atehMrB91kHAIYdVvIufoaMK-e_02FP3lhzYMJ4AsNTjpaHAuhebL8TeQrZpjekx3afQw

### Log into AAD
# @name auth

GET /{{tenantId}}/oauth2/v2.0/token
Host: login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&
client_id={{clientId}}&
client_secret={{secret}}&
scope=https://graph.microsoft.com/.default

###
GET https://graph.microsoft.com/v1.0/applications?$count=true
Authorization: Bearer {{token}}

###
GET https://graph.microsoft.com/v1.0/users/2e5dca57-ad6c-4ebc-80c0-6d190d32e7a3/appRoleAssignments
Authorization: Bearer {{token}}

### demo@odsl.online
GET https://graph.microsoft.com/v1.0/users/5546381f-43cc-4fb0-a8f4-218ef95ba383/appRoleAssignments
Authorization: Bearer {{t}}

### Assign a role
POST https://graph.microsoft.com/v1.0/servicePrincipals/fac515c1-5825-4acd-8de4-404796d49070/appRoleAssignedTo
Authorization: Bearer {{t}}
Content-Type: application/json

{
  "appRoleId": "05ef7db1-7141-4bb9-b29d-ce496c623169",
  "resourceId": "fac515c1-5825-4acd-8de4-404796d49070",
  "principalId": "5546381f-43cc-4fb0-a8f4-218ef95ba383"
}

